/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/payment-methods/route";
exports.ids = ["app/api/payment-methods/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fpayment-methods%2Froute&page=%2Fapi%2Fpayment-methods%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayment-methods%2Froute.ts&appDir=%2FUsers%2Fbryanfeng%2Fpayment-agent-platform%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbryanfeng%2Fpayment-agent-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fpayment-methods%2Froute&page=%2Fapi%2Fpayment-methods%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayment-methods%2Froute.ts&appDir=%2FUsers%2Fbryanfeng%2Fpayment-agent-platform%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbryanfeng%2Fpayment-agent-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_bryanfeng_payment_agent_platform_src_app_api_payment_methods_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/payment-methods/route.ts */ \"(rsc)/./src/app/api/payment-methods/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/payment-methods/route\",\n        pathname: \"/api/payment-methods\",\n        filename: \"route\",\n        bundlePath: \"app/api/payment-methods/route\"\n    },\n    resolvedPagePath: \"/Users/bryanfeng/payment-agent-platform/src/app/api/payment-methods/route.ts\",\n    nextConfigOutput,\n    userland: _Users_bryanfeng_payment_agent_platform_src_app_api_payment_methods_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZwYXltZW50LW1ldGhvZHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnBheW1lbnQtbWV0aG9kcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnBheW1lbnQtbWV0aG9kcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmJyeWFuZmVuZyUyRnBheW1lbnQtYWdlbnQtcGxhdGZvcm0lMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGYnJ5YW5mZW5nJTJGcGF5bWVudC1hZ2VudC1wbGF0Zm9ybSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDNEI7QUFDekc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9icnlhbmZlbmcvcGF5bWVudC1hZ2VudC1wbGF0Zm9ybS9zcmMvYXBwL2FwaS9wYXltZW50LW1ldGhvZHMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3BheW1lbnQtbWV0aG9kcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3BheW1lbnQtbWV0aG9kc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcGF5bWVudC1tZXRob2RzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2JyeWFuZmVuZy9wYXltZW50LWFnZW50LXBsYXRmb3JtL3NyYy9hcHAvYXBpL3BheW1lbnQtbWV0aG9kcy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fpayment-methods%2Froute&page=%2Fapi%2Fpayment-methods%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayment-methods%2Froute.ts&appDir=%2FUsers%2Fbryanfeng%2Fpayment-agent-platform%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbryanfeng%2Fpayment-agent-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/payment-methods/route.ts":
/*!**********************************************!*\
  !*** ./src/app/api/payment-methods/route.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _utils_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/supabase */ \"(rsc)/./src/utils/supabase.ts\");\n\n\nasync function GET() {\n    try {\n        const supabase = (0,_utils_supabase__WEBPACK_IMPORTED_MODULE_1__.createClient)();\n        // Try to access the payment_methods table\n        // If it doesn't exist, we'll get an error but continue anyway\n        // The table needs to be created through the Supabase interface or using migrations\n        const { error: checkTableError } = await supabase.from('payment_methods').select('id').limit(1);\n        if (checkTableError) {\n            // Log the error but continue with the request\n            console.warn('Warning accessing payment_methods table:', checkTableError.message);\n        // Don't return an error response, as the table might exist with a different structure\n        // or we might not have permission to access it yet but can still write to it\n        }\n        // Query all payment methods\n        const { data, error } = await supabase.from('payment_methods').select('*').order('created_at', {\n            ascending: false\n        });\n        if (error) {\n            console.error('Error fetching payment methods:', error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Failed to fetch payment methods'\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(data);\n    } catch (error) {\n        console.error('Server error fetching payment methods:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Internal server error'\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        console.log('Received payment method creation request');\n        const supabase = (0,_utils_supabase__WEBPACK_IMPORTED_MODULE_1__.createClient)();\n        const paymentMethod = await request.json();\n        console.log('Payment method data received:', JSON.stringify(paymentMethod, null, 2));\n        // Validate required fields\n        if (!paymentMethod.type || !paymentMethod.name) {\n            console.error('Missing required fields:', {\n                type: paymentMethod.type,\n                name: paymentMethod.name\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Missing required fields',\n                details: 'Payment method type and name are required'\n            }, {\n                status: 400\n            });\n        }\n        // Add created timestamp if not provided\n        const newPaymentMethod = {\n            ...paymentMethod,\n            created_at: paymentMethod.created_at || new Date().toISOString(),\n            updated_at: paymentMethod.updated_at || new Date().toISOString()\n        };\n        // Remove any customerId or customer_id if present since we don't need them\n        delete newPaymentMethod.customerId;\n        delete newPaymentMethod.customer_id;\n        // Ensure details is an object\n        if (!newPaymentMethod.details) {\n            newPaymentMethod.details = {};\n        }\n        // For credit/debit cards, mask the number for storage\n        if (newPaymentMethod.type === 'credit_card' || newPaymentMethod.type === 'debit_card') {\n            if (newPaymentMethod.details?.cardNumber) {\n                const cardNumber = newPaymentMethod.details.cardNumber.replace(/\\s/g, '');\n                const last4 = cardNumber.slice(-4);\n                newPaymentMethod.details.maskedCardNumber = `•••• •••• •••• ${last4}`;\n                // Don't store the full card number\n                delete newPaymentMethod.details.cardNumber;\n            }\n        }\n        // For bank accounts, mask the account number\n        if (newPaymentMethod.type === 'bank_account') {\n            if (newPaymentMethod.details?.accountNumber) {\n                const accountNumber = newPaymentMethod.details.accountNumber;\n                const last4 = accountNumber.slice(-4);\n                newPaymentMethod.details.maskedAccountNumber = `••••${last4}`;\n                // Don't store the full account number\n                delete newPaymentMethod.details.accountNumber;\n            }\n        }\n        console.log('Processed payment method for storage:', JSON.stringify(newPaymentMethod, null, 2));\n        // Remove unwanted fields\n        delete newPaymentMethod.isDefault;\n        delete newPaymentMethod.is_default;\n        // Remove empty ID field to let PostgreSQL generate one with gen_random_uuid()\n        if (!newPaymentMethod.id || newPaymentMethod.id === '') {\n            delete newPaymentMethod.id;\n        }\n        // Insert the payment method using the Supabase client\n        console.log('Inserting payment method into database...');\n        const { data, error } = await supabase.from('payment_methods').insert([\n            newPaymentMethod\n        ]).select().single();\n        if (error) {\n            console.error('Error creating payment method:', error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Failed to create payment method',\n                details: error.message,\n                code: error.code\n            }, {\n                status: 500\n            });\n        }\n        console.log('Successfully created payment method:', data);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(data);\n    } catch (error) {\n        console.error('Server error creating payment method:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Internal server error',\n            message: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9wYXltZW50LW1ldGhvZHMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEyQztBQUNLO0FBRXpDLGVBQWVFO0lBQ3BCLElBQUk7UUFDRixNQUFNQyxXQUFXRiw2REFBWUE7UUFFN0IsMENBQTBDO1FBQzFDLDhEQUE4RDtRQUM5RCxtRkFBbUY7UUFDbkYsTUFBTSxFQUFFRyxPQUFPQyxlQUFlLEVBQUUsR0FBRyxNQUFNRixTQUN0Q0csSUFBSSxDQUFDLG1CQUNMQyxNQUFNLENBQUMsTUFDUEMsS0FBSyxDQUFDO1FBRVQsSUFBSUgsaUJBQWlCO1lBQ25CLDhDQUE4QztZQUM5Q0ksUUFBUUMsSUFBSSxDQUFDLDRDQUE0Q0wsZ0JBQWdCTSxPQUFPO1FBQ2hGLHNGQUFzRjtRQUN0Riw2RUFBNkU7UUFDL0U7UUFFQSw0QkFBNEI7UUFDNUIsTUFBTSxFQUFFQyxJQUFJLEVBQUVSLEtBQUssRUFBRSxHQUFHLE1BQU1ELFNBQzNCRyxJQUFJLENBQUMsbUJBQ0xDLE1BQU0sQ0FBQyxLQUNQTSxLQUFLLENBQUMsY0FBYztZQUFFQyxXQUFXO1FBQU07UUFFMUMsSUFBSVYsT0FBTztZQUNUSyxRQUFRTCxLQUFLLENBQUMsbUNBQW1DQTtZQUNqRCxPQUFPSixxREFBWUEsQ0FBQ2UsSUFBSSxDQUFDO2dCQUFFWCxPQUFPO1lBQWtDLEdBQUc7Z0JBQUVZLFFBQVE7WUFBSTtRQUN2RjtRQUVBLE9BQU9oQixxREFBWUEsQ0FBQ2UsSUFBSSxDQUFDSDtJQUMzQixFQUFFLE9BQU9SLE9BQU87UUFDZEssUUFBUUwsS0FBSyxDQUFDLDBDQUEwQ0E7UUFDeEQsT0FBT0oscURBQVlBLENBQUNlLElBQUksQ0FBQztZQUFFWCxPQUFPO1FBQXdCLEdBQUc7WUFBRVksUUFBUTtRQUFJO0lBQzdFO0FBQ0Y7QUFFTyxlQUFlQyxLQUFLQyxPQUFnQjtJQUN6QyxJQUFJO1FBQ0ZULFFBQVFVLEdBQUcsQ0FBQztRQUNaLE1BQU1oQixXQUFXRiw2REFBWUE7UUFD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LEdBQUc7Z0JBQUU3QixRQUFRO1lBQUk7UUFDbkI7UUFFQVAsUUFBUVUsR0FBRyxDQUFDLHdDQUF3Q1A7UUFDcEQsT0FBT1oscURBQVlBLENBQUNlLElBQUksQ0FBQ0g7SUFDM0IsRUFBRSxPQUFPUixPQUFZO1FBQ25CSyxRQUFRTCxLQUFLLENBQUMseUNBQXlDQTtRQUN2RCxPQUFPSixxREFBWUEsQ0FBQ2UsSUFBSSxDQUFDO1lBQ3ZCWCxPQUFPO1lBQ1BPLFNBQVNQLE1BQU1PLE9BQU87UUFDeEIsR0FBRztZQUFFSyxRQUFRO1FBQUk7SUFDbkI7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2JyeWFuZmVuZy9wYXltZW50LWFnZW50LXBsYXRmb3JtL3NyYy9hcHAvYXBpL3BheW1lbnQtbWV0aG9kcy9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAL3V0aWxzL3N1cGFiYXNlJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudCgpO1xuICAgIFxuICAgIC8vIFRyeSB0byBhY2Nlc3MgdGhlIHBheW1lbnRfbWV0aG9kcyB0YWJsZVxuICAgIC8vIElmIGl0IGRvZXNuJ3QgZXhpc3QsIHdlJ2xsIGdldCBhbiBlcnJvciBidXQgY29udGludWUgYW55d2F5XG4gICAgLy8gVGhlIHRhYmxlIG5lZWRzIHRvIGJlIGNyZWF0ZWQgdGhyb3VnaCB0aGUgU3VwYWJhc2UgaW50ZXJmYWNlIG9yIHVzaW5nIG1pZ3JhdGlvbnNcbiAgICBjb25zdCB7IGVycm9yOiBjaGVja1RhYmxlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncGF5bWVudF9tZXRob2RzJylcbiAgICAgIC5zZWxlY3QoJ2lkJylcbiAgICAgIC5saW1pdCgxKTtcbiAgICAgIFxuICAgIGlmIChjaGVja1RhYmxlRXJyb3IpIHtcbiAgICAgIC8vIExvZyB0aGUgZXJyb3IgYnV0IGNvbnRpbnVlIHdpdGggdGhlIHJlcXVlc3RcbiAgICAgIGNvbnNvbGUud2FybignV2FybmluZyBhY2Nlc3NpbmcgcGF5bWVudF9tZXRob2RzIHRhYmxlOicsIGNoZWNrVGFibGVFcnJvci5tZXNzYWdlKTtcbiAgICAgIC8vIERvbid0IHJldHVybiBhbiBlcnJvciByZXNwb25zZSwgYXMgdGhlIHRhYmxlIG1pZ2h0IGV4aXN0IHdpdGggYSBkaWZmZXJlbnQgc3RydWN0dXJlXG4gICAgICAvLyBvciB3ZSBtaWdodCBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGFjY2VzcyBpdCB5ZXQgYnV0IGNhbiBzdGlsbCB3cml0ZSB0byBpdFxuICAgIH1cbiAgICBcbiAgICAvLyBRdWVyeSBhbGwgcGF5bWVudCBtZXRob2RzXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwYXltZW50X21ldGhvZHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwYXltZW50IG1ldGhvZHM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggcGF5bWVudCBtZXRob2RzJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oZGF0YSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU2VydmVyIGVycm9yIGZldGNoaW5nIHBheW1lbnQgbWV0aG9kczonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdSZWNlaXZlZCBwYXltZW50IG1ldGhvZCBjcmVhdGlvbiByZXF1ZXN0Jyk7XG4gICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoKTtcbiAgICBjb25zdCBwYXltZW50TWV0aG9kID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1BheW1lbnQgbWV0aG9kIGRhdGEgcmVjZWl2ZWQ6JywgSlNPTi5zdHJpbmdpZnkocGF5bWVudE1ldGhvZCwgbnVsbCwgMikpO1xuICAgIFxuICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xuICAgIGlmICghcGF5bWVudE1ldGhvZC50eXBlIHx8ICFwYXltZW50TWV0aG9kLm5hbWUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzOicsIHsgdHlwZTogcGF5bWVudE1ldGhvZC50eXBlLCBuYW1lOiBwYXltZW50TWV0aG9kLm5hbWUgfSk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkcycsIFxuICAgICAgICBkZXRhaWxzOiAnUGF5bWVudCBtZXRob2QgdHlwZSBhbmQgbmFtZSBhcmUgcmVxdWlyZWQnIFxuICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gQWRkIGNyZWF0ZWQgdGltZXN0YW1wIGlmIG5vdCBwcm92aWRlZFxuICAgIGNvbnN0IG5ld1BheW1lbnRNZXRob2QgPSB7XG4gICAgICAuLi5wYXltZW50TWV0aG9kLFxuICAgICAgY3JlYXRlZF9hdDogcGF5bWVudE1ldGhvZC5jcmVhdGVkX2F0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHVwZGF0ZWRfYXQ6IHBheW1lbnRNZXRob2QudXBkYXRlZF9hdCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuICAgIFxuICAgIC8vIFJlbW92ZSBhbnkgY3VzdG9tZXJJZCBvciBjdXN0b21lcl9pZCBpZiBwcmVzZW50IHNpbmNlIHdlIGRvbid0IG5lZWQgdGhlbVxuICAgIGRlbGV0ZSBuZXdQYXltZW50TWV0aG9kLmN1c3RvbWVySWQ7XG4gICAgZGVsZXRlIG5ld1BheW1lbnRNZXRob2QuY3VzdG9tZXJfaWQ7XG4gICAgXG4gICAgLy8gRW5zdXJlIGRldGFpbHMgaXMgYW4gb2JqZWN0XG4gICAgaWYgKCFuZXdQYXltZW50TWV0aG9kLmRldGFpbHMpIHtcbiAgICAgIG5ld1BheW1lbnRNZXRob2QuZGV0YWlscyA9IHt9O1xuICAgIH1cbiAgICBcbiAgICAvLyBGb3IgY3JlZGl0L2RlYml0IGNhcmRzLCBtYXNrIHRoZSBudW1iZXIgZm9yIHN0b3JhZ2VcbiAgICBpZiAobmV3UGF5bWVudE1ldGhvZC50eXBlID09PSAnY3JlZGl0X2NhcmQnIHx8IG5ld1BheW1lbnRNZXRob2QudHlwZSA9PT0gJ2RlYml0X2NhcmQnKSB7XG4gICAgICBpZiAobmV3UGF5bWVudE1ldGhvZC5kZXRhaWxzPy5jYXJkTnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGNhcmROdW1iZXIgPSBuZXdQYXltZW50TWV0aG9kLmRldGFpbHMuY2FyZE51bWJlci5yZXBsYWNlKC9cXHMvZywgJycpO1xuICAgICAgICBjb25zdCBsYXN0NCA9IGNhcmROdW1iZXIuc2xpY2UoLTQpO1xuICAgICAgICBuZXdQYXltZW50TWV0aG9kLmRldGFpbHMubWFza2VkQ2FyZE51bWJlciA9IGDigKLigKLigKLigKIg4oCi4oCi4oCi4oCiIOKAouKAouKAouKAoiAke2xhc3Q0fWA7XG4gICAgICAgIC8vIERvbid0IHN0b3JlIHRoZSBmdWxsIGNhcmQgbnVtYmVyXG4gICAgICAgIGRlbGV0ZSBuZXdQYXltZW50TWV0aG9kLmRldGFpbHMuY2FyZE51bWJlcjtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gRm9yIGJhbmsgYWNjb3VudHMsIG1hc2sgdGhlIGFjY291bnQgbnVtYmVyXG4gICAgaWYgKG5ld1BheW1lbnRNZXRob2QudHlwZSA9PT0gJ2JhbmtfYWNjb3VudCcpIHtcbiAgICAgIGlmIChuZXdQYXltZW50TWV0aG9kLmRldGFpbHM/LmFjY291bnROdW1iZXIpIHtcbiAgICAgICAgY29uc3QgYWNjb3VudE51bWJlciA9IG5ld1BheW1lbnRNZXRob2QuZGV0YWlscy5hY2NvdW50TnVtYmVyO1xuICAgICAgICBjb25zdCBsYXN0NCA9IGFjY291bnROdW1iZXIuc2xpY2UoLTQpO1xuICAgICAgICBuZXdQYXltZW50TWV0aG9kLmRldGFpbHMubWFza2VkQWNjb3VudE51bWJlciA9IGDigKLigKLigKLigKIke2xhc3Q0fWA7XG4gICAgICAgIC8vIERvbid0IHN0b3JlIHRoZSBmdWxsIGFjY291bnQgbnVtYmVyXG4gICAgICAgIGRlbGV0ZSBuZXdQYXltZW50TWV0aG9kLmRldGFpbHMuYWNjb3VudE51bWJlcjtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1Byb2Nlc3NlZCBwYXltZW50IG1ldGhvZCBmb3Igc3RvcmFnZTonLCBKU09OLnN0cmluZ2lmeShuZXdQYXltZW50TWV0aG9kLCBudWxsLCAyKSk7XG4gICAgXG4gICAgLy8gUmVtb3ZlIHVud2FudGVkIGZpZWxkc1xuICAgIGRlbGV0ZSBuZXdQYXltZW50TWV0aG9kLmlzRGVmYXVsdDtcbiAgICBkZWxldGUgbmV3UGF5bWVudE1ldGhvZC5pc19kZWZhdWx0O1xuICAgIFxuICAgIC8vIFJlbW92ZSBlbXB0eSBJRCBmaWVsZCB0byBsZXQgUG9zdGdyZVNRTCBnZW5lcmF0ZSBvbmUgd2l0aCBnZW5fcmFuZG9tX3V1aWQoKVxuICAgIGlmICghbmV3UGF5bWVudE1ldGhvZC5pZCB8fCBuZXdQYXltZW50TWV0aG9kLmlkID09PSAnJykge1xuICAgICAgZGVsZXRlIG5ld1BheW1lbnRNZXRob2QuaWQ7XG4gICAgfVxuICAgIFxuICAgIC8vIEluc2VydCB0aGUgcGF5bWVudCBtZXRob2QgdXNpbmcgdGhlIFN1cGFiYXNlIGNsaWVudFxuICAgIGNvbnNvbGUubG9nKCdJbnNlcnRpbmcgcGF5bWVudCBtZXRob2QgaW50byBkYXRhYmFzZS4uLicpO1xuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncGF5bWVudF9tZXRob2RzJylcbiAgICAgIC5pbnNlcnQoW25ld1BheW1lbnRNZXRob2RdKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBwYXltZW50IG1ldGhvZDonLCBlcnJvcik7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIHBheW1lbnQgbWV0aG9kJywgXG4gICAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGVcbiAgICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgY3JlYXRlZCBwYXltZW50IG1ldGhvZDonLCBkYXRhKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oZGF0YSk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTZXJ2ZXIgZXJyb3IgY3JlYXRpbmcgcGF5bWVudCBtZXRob2Q6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLCBcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImNyZWF0ZUNsaWVudCIsIkdFVCIsInN1cGFiYXNlIiwiZXJyb3IiLCJjaGVja1RhYmxlRXJyb3IiLCJmcm9tIiwic2VsZWN0IiwibGltaXQiLCJjb25zb2xlIiwid2FybiIsIm1lc3NhZ2UiLCJkYXRhIiwib3JkZXIiLCJhc2NlbmRpbmciLCJqc29uIiwic3RhdHVzIiwiUE9TVCIsInJlcXVlc3QiLCJsb2ciLCJwYXltZW50TWV0aG9kIiwiSlNPTiIsInN0cmluZ2lmeSIsInR5cGUiLCJuYW1lIiwiZGV0YWlscyIsIm5ld1BheW1lbnRNZXRob2QiLCJjcmVhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidXBkYXRlZF9hdCIsImN1c3RvbWVySWQiLCJjdXN0b21lcl9pZCIsImNhcmROdW1iZXIiLCJyZXBsYWNlIiwibGFzdDQiLCJzbGljZSIsIm1hc2tlZENhcmROdW1iZXIiLCJhY2NvdW50TnVtYmVyIiwibWFza2VkQWNjb3VudE51bWJlciIsImlzRGVmYXVsdCIsImlzX2RlZmF1bHQiLCJpZCIsImluc2VydCIsInNpbmdsZSIsImNvZGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/payment-methods/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/utils/supabase.ts":
/*!*******************************!*\
  !*** ./src/utils/supabase.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createClient: () => (/* binding */ createClient),\n/* harmony export */   safeQuery: () => (/* binding */ safeQuery),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   testConnection: () => (/* binding */ testConnection)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n// Get environment variables\nconst supabaseUrl = \"https://kjcvqvwocgabjyikznbh.supabase.co\" || 0;\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtqY3ZxdndvY2dhYmp5aWt6bmJoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI2OTY4NzAsImV4cCI6MjA1ODI3Mjg3MH0.r1ky_zBRa6iiT4r8zE0OwmsaUNdduyPCIo7EjE_4zzY\" || 0;\n// Check if environment variables are set\nif (!supabaseUrl || !supabaseAnonKey) {\n    console.warn('Missing Supabase environment variables. Database functionality may be limited.');\n}\n// Create supabase client\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n// Export a function to create a new client (useful in API routes)\nfunction createClient() {\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n}\n// Error handling wrapper for Supabase queries\nasync function safeQuery(queryFn) {\n    try {\n        const result = await queryFn();\n        return {\n            data: result,\n            error: null\n        };\n    } catch (error) {\n        console.error('Database query error:', error);\n        return {\n            data: null,\n            error\n        };\n    }\n}\n// Test connection\nasync function testConnection() {\n    try {\n        const { data, error } = await supabase.from('health_check').select('*').limit(1);\n        if (error) throw error;\n        return {\n            connected: true,\n            message: 'Successfully connected to Supabase'\n        };\n    } catch (error) {\n        console.error('Supabase connection test failed:', error);\n        return {\n            connected: false,\n            message: 'Failed to connect to Supabase',\n            error\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdXRpbHMvc3VwYWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBNkU7QUFFN0UsNEJBQTRCO0FBQzVCLE1BQU1FLGNBQWNDLDBDQUFvQyxJQUFJLENBQUU7QUFDOUQsTUFBTUcsa0JBQWtCSCxrTkFBeUMsSUFBSSxDQUFFO0FBRXZFLHlDQUF5QztBQUN6QyxJQUFJLENBQUNELGVBQWUsQ0FBQ0ksaUJBQWlCO0lBQ3BDRSxRQUFRQyxJQUFJLENBQUM7QUFDZjtBQUVBLHlCQUF5QjtBQUNsQixNQUFNQyxXQUFXVCxtRUFBb0JBLENBQUNDLGFBQWFJLGlCQUFpQjtBQUUzRSxrRUFBa0U7QUFDM0QsU0FBU047SUFDZCxPQUFPQyxtRUFBb0JBLENBQUNDLGFBQWFJO0FBQzNDO0FBRUEsOENBQThDO0FBQ3ZDLGVBQWVLLFVBQWFDLE9BQXlCO0lBQzFELElBQUk7UUFDRixNQUFNQyxTQUFTLE1BQU1EO1FBQ3JCLE9BQU87WUFBRUUsTUFBTUQ7WUFBUUUsT0FBTztRQUFLO0lBQ3JDLEVBQUUsT0FBT0EsT0FBTztRQUNkUCxRQUFRTyxLQUFLLENBQUMseUJBQXlCQTtRQUN2QyxPQUFPO1lBQUVELE1BQU07WUFBTUM7UUFBTTtJQUM3QjtBQUNGO0FBRUEsa0JBQWtCO0FBQ1gsZUFBZUM7SUFDcEIsSUFBSTtRQUNGLE1BQU0sRUFBRUYsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNTCxTQUFTTyxJQUFJLENBQUMsZ0JBQWdCQyxNQUFNLENBQUMsS0FBS0MsS0FBSyxDQUFDO1FBQzlFLElBQUlKLE9BQU8sTUFBTUE7UUFDakIsT0FBTztZQUFFSyxXQUFXO1lBQU1DLFNBQVM7UUFBcUM7SUFDMUUsRUFBRSxPQUFPTixPQUFPO1FBQ2RQLFFBQVFPLEtBQUssQ0FBQyxvQ0FBb0NBO1FBQ2xELE9BQU87WUFBRUssV0FBVztZQUFPQyxTQUFTO1lBQWlDTjtRQUFNO0lBQzdFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9icnlhbmZlbmcvcGF5bWVudC1hZ2VudC1wbGF0Zm9ybS9zcmMvdXRpbHMvc3VwYWJhc2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IGFzIGNyZWF0ZVN1cGFiYXNlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcblxuLy8gR2V0IGVudmlyb25tZW50IHZhcmlhYmxlc1xuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgfHwgJyc7XG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSB8fCAnJztcblxuLy8gQ2hlY2sgaWYgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBzZXRcbmlmICghc3VwYWJhc2VVcmwgfHwgIXN1cGFiYXNlQW5vbktleSkge1xuICBjb25zb2xlLndhcm4oJ01pc3NpbmcgU3VwYWJhc2UgZW52aXJvbm1lbnQgdmFyaWFibGVzLiBEYXRhYmFzZSBmdW5jdGlvbmFsaXR5IG1heSBiZSBsaW1pdGVkLicpO1xufVxuXG4vLyBDcmVhdGUgc3VwYWJhc2UgY2xpZW50XG5leHBvcnQgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVTdXBhYmFzZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcblxuLy8gRXhwb3J0IGEgZnVuY3Rpb24gdG8gY3JlYXRlIGEgbmV3IGNsaWVudCAodXNlZnVsIGluIEFQSSByb3V0ZXMpXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2xpZW50KCkge1xuICByZXR1cm4gY3JlYXRlU3VwYWJhc2VDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSk7XG59XG5cbi8vIEVycm9yIGhhbmRsaW5nIHdyYXBwZXIgZm9yIFN1cGFiYXNlIHF1ZXJpZXNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYWZlUXVlcnk8VD4ocXVlcnlGbjogKCkgPT4gUHJvbWlzZTxUPik6IFByb21pc2U8eyBkYXRhOiBUIHwgbnVsbDsgZXJyb3I6IGFueSB9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnlGbigpO1xuICAgIHJldHVybiB7IGRhdGE6IHJlc3VsdCwgZXJyb3I6IG51bGwgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBxdWVyeSBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgfVxufVxuXG4vLyBUZXN0IGNvbm5lY3Rpb25cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0ZXN0Q29ubmVjdGlvbigpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdoZWFsdGhfY2hlY2snKS5zZWxlY3QoJyonKS5saW1pdCgxKTtcbiAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICAgIHJldHVybiB7IGNvbm5lY3RlZDogdHJ1ZSwgbWVzc2FnZTogJ1N1Y2Nlc3NmdWxseSBjb25uZWN0ZWQgdG8gU3VwYWJhc2UnIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgY29ubmVjdGlvbiB0ZXN0IGZhaWxlZDonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgY29ubmVjdGVkOiBmYWxzZSwgbWVzc2FnZTogJ0ZhaWxlZCB0byBjb25uZWN0IHRvIFN1cGFiYXNlJywgZXJyb3IgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImNyZWF0ZVN1cGFiYXNlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VBbm9uS2V5IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJjb25zb2xlIiwid2FybiIsInN1cGFiYXNlIiwic2FmZVF1ZXJ5IiwicXVlcnlGbiIsInJlc3VsdCIsImRhdGEiLCJlcnJvciIsInRlc3RDb25uZWN0aW9uIiwiZnJvbSIsInNlbGVjdCIsImxpbWl0IiwiY29ubmVjdGVkIiwibWVzc2FnZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/utils/supabase.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fpayment-methods%2Froute&page=%2Fapi%2Fpayment-methods%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayment-methods%2Froute.ts&appDir=%2FUsers%2Fbryanfeng%2Fpayment-agent-platform%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbryanfeng%2Fpayment-agent-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();